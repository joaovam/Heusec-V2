

var dados = {
  noticia: [
    {
      id: 0,
      titulo: "O que é o Antivírus? Entenda mais",
      categoria: "iniciante",
      url: "https://blog-br.softwareone.com/o-que-e-antivirus",
      img: "img/informacao/iniciante/antivirus.png",
      resumo: `Entenda como funciona um antivírus e como ele pode te auxiliar no cotidiano`,
      texto: `Desde que a computação surgiu, pessoas mal intencionadas utilizam conhecimentos em programação para criar códigos maliciosos, que danificam o computador, roubam dados dos usuários, entre outros malefícios. O assunto é sério: alguns programas são capazes até mesmo de captar tudo o que digitamos no teclado. Por isso, prevenir-se é fundamental.

      E é justamente para combater essas pragas virtuais que foram criados os antivírus. Mas você sabe o que é antivírus? Vamos desvendar como funcionam esses programas mantidos por grandes empresas de segurança e descobrir algumas das melhores opções disponíveis. Ficou curioso? Então acompanhe!`,
    },
    {
      id: 1,
      titulo: "Aplicativo para Gerenciar suas senhas",
      categoria: "iniciante",
      url:
        "https://canaltech.com.br/apps/Aplicativos-para-gerenciar-suas-senhas/",
      img: "img/informacao/iniciante/gerente.jpeg",
      resumo: `Aplicativos que podem te auxiliar a guardar senhas e logins facilitando assim sua proteção`,
      texto: `Com os hackers cada vez mais ágeis e as ameaças à nossa segurança online crescendo vertiginosamente, as informações de login estão se tornando cada vez mais delicadas e valiosas. Criar senhas realmente seguras exige ao menos uma letra maiúscula, símbolo, número, o nome da tia-avó da sua vizinha do lado esquerdo, e coisas do tipo. Mas como se lembrar de todas essas senhas, uma vez que é indicado usar combinações diferentes para cada login?

      Felizmente, existem aplicativos que ajudam a aliviar um pouco o estresse de precisar decorar tantas senhas. Eles guardam suas informações de login de forma segura em um único lugar. A maioria dos aplicativos também ajuda a detectar tentativas de phishing e hacking, assim você não precisa se preocupar com invasões ao próprio aplicativo. Confira algumas dicas de apps móveis e para desktop que podem te ajudar com esse dilema da vida moderna.`,
    },
    {
      id: 2,
      titulo: "Como organizar documentos para fazer backup?",
      categoria: "iniciante",
      url:
        "https://canaltech.com.br/seguranca/Como-organizar-documentos-para-fazer-backup/",
      img: "img/informacao/iniciante/backup.png",
      resumo:
        "Dicas para organização na hora de fazer backups em seu computador",
      texto: `Um bom plano de recuperação de desastres envolve mais do que o backup e armazenamento de informações num lugar fora do ambiente físico da empresa. Normalmente a estratégia inclui procedimentos testados e documentados que devem ser seguidos à risca e revisados periodicamente. Afinal, quando a crise se instaura, ninguém quer ser pego de surpresa. Mais do que isso: quando uma empresa está preparada para situações extremas, há redução de perdas importantes, redução de eventuais arranhões à imagem corporativa, redução de interrupções, distribuição de responsabilidades, mais segurança e melhores resultados para os clientes, além de um retorno mais rápido à estabilidade. Mas, saber organizar documentos vem sendo o grande X da questão para a maioria das empresas.`,
    },
    {
      id: 3,
      titulo: "Tudo sobre Phishing",
      categoria: "iniciante",
      url: "https://br.malwarebytes.com/phishing/",
      img: "img/informacao/iniciante/Phishing.jpg",
      resumo: `O que é phishing? Tipos de phising..Como me proteger? Leia para entender um pouco mais sobre essa técnica de roubo de informações tao utilizadas no dia a dia`,
      texto: `Phishing é o crime de enganar as pessoas para que compartilhem informações confidenciais como senhas e número de cartões de crédito. Como em uma verdadeira pescaria, há mais de uma maneira fisgar uma vítima, mas uma tática de phishing é a mais comum. As vítimas recebem um e-mail ou uma mensagem de texto que imita (ou “engana”) uma pessoa ou organização em que confiam, como um colega de trabalho, um banco ou um órgão governamental. Quando a vítima abre o e-mail ou o texto, eles encontram uma mensagem assustadora que induz a deixar o bom senso de lado ao deixá-los com medo. A mensagem exige que a vítima acesse um website e execute uma ação imediata ou assuma um risco por algum tipo de consequência. 

      Se os usuários mordem a isca e clicam no link, eles enviam uma imitação de um website legítimo. A partir daí, eles pedem para fazer o login com nome de usuário e senha. Se forem ingênuos o bastante para obedecer, as informações de acesso são enviadas aos ladrões que as usam para roubar identidades, roubam contas bancárias e vendem os dados pessoais no mercado negro.`,
    },
    {
      id: 4,
      titulo: "10 práticas para garantir a segurança na internet",
      categoria: "iniciante",
      url:
        "https://canaltech.com.br/seguranca/10-praticas-definitivas-para-garantir-a-seguranca-na-internet/",
      img: "img/informacao/iniciante/praticas.jpg",
      resumo: `Dicas que te guiarão a se manter mais seguro nesse ambiente cada vez mais movimentado que é a web`,
      texto: `O último ano não foi fácil para quem acompanha e trabalha no mundo da tecnologia. Com certeza você ouviu falar do Heartbleed aqui e acolá, presenciou o surgimento de botnets como a Gameover Zeus e a Poodle, uma perigosa falha que afetou o SSL 3.0 e que de fofinha não tem nada.

      Fora isso, uma série de tipos de ataque que usavam desde o nome dos até então candidatos à presidência da república surgiram com o objetivo de roubar dados pessoais e bancários dos mais incautos. Enfim, 2014 foi um ano movimentado para os cibercriminosos.
      
      Toda essa agitação, claro, preocupou e continua preocupando muitos usuários. Pensando nisso, nós separamos dez dicas para lhe ajudar a passar ileso por esse novo ano de 2015, que promete ser tão movimentado quanto o anterior.`,
    },
    {
      id: 5,
      titulo: "Saiba tudo sobre botnet",
      categoria: "intermediario",
      url:
        "https://www.kaspersky.com.br/resource-center/threats/botnet-attacks",
      img: "img/informacao/intermediario/botnet.jpg",
      resumo:
        "Saiba o que são as botnets e como elas podem afetar seu dia a dia.",
      texto: `A palavra botnet é formada pela junção das palavras em inglês "robot" (robô) e "network" (rede). Os criminosos virtuais usam cavalos de Troia especiais para violar a segurança de computadores de vários usuários, assumir o controle de cada um deles e organizar todas as máquinas infectadas em uma rede de "bots" que pode ser gerenciada remotamente.`,
    },
    {
      id: 6,
      titulo: "Cavalo de Troia",
      categoria: "intermediario",
      url: "https://www.kaspersky.com.br/resource-center/threats/trojans",
      img: "img/informacao/intermediario/troia.jpg",
      resumo:
        "Saiba o que é, e mais importante, como se proteger desse destruidor vírus.",
      texto: `Cavalo de Troia é um tipo de malware que, frequentemente, está disfarçado de software legítimo. Eles podem ser empregados por criminosos virtuais e hackers para tentar obter acesso aos sistemas dos usuários. Em geral, os usuários são enganados por alguma forma de engenharia social para carregar e executar cavalos de Troia em seus sistemas. Uma vez ativados, os cavalos de Troia permitem que os criminosos o espionem, roubaem seus dados confidenciais e obtenham acesso ao seu sistema pela porta de fundo. Essas ações podem incluir:

      Excluir dados

      Bloquear dados

      Modificar dados

      Copiar dados

      Atrapalhar o desempenho de computadores e redes de computadores

      Diferentemente dos vírus e worms, os cavalos de Troia não conseguem se autorreplicar.`,
    },
    {
      id: 7,
      titulo: "Como corrigir os erros java que aparecem no seu computador.",
      categoria: "intermediario",
      url:
        "https://canaltech.com.br/software/Como-corrigir-os-erros-Java-que-aparecem-no-seu-computador/",
      img: "img/informacao/intermediario/java.png",
      resumo: `A linguagem Java é essêncial para nosso cotidiano mas as vezes leva a aparecer alguns erros, saiba aqui como resolvê-los. `,
      texto: `A linguagem de programação Java é bastante conhecida e muito utilizada nas várias aplicações que acessamos no nosso dia a dia. Ela está presente também em diversos sites que necessitam de acesso seguro, como, por exemplo, sites de banco. Contudo, o Java torna-se também muito incoveniente quando envia notificações de erro que insistem em aparecer e travar nossos computadores quando menos esperamos ou impedir que possamos acessar sites bancários.
      Se você é uma vítima que sofre frequentemente com os erros Java, fique tranquilo! Em um simples passo a passo te ensinaremos três formas de solucionar falhas e corrigir os insistentes erros Java que aparecem nos computadores.`,
    },
    {
      id: 8,
      titulo: "O que é OWASP e sua importância para segurança em aplicações",
      categoria: "intermediario",
      url: "https://blog.convisoappsec.com/owasp-e-sua-importancia/",
      img: "img/informacao/intermediario/owasp.png",
      resumo: `conheça um pouco mais sobre essa entidade muito presente no fortalecimento da segurança de software.`,
      texto: `A segurança de aplicativos e softwares de computadores é simplesmente uma das etapas mais importantes do planejamento para o desenvolvimento. Afinal, o nível de confiabilidade é o que determinará o sucesso dele, e isso se refletirá no número de usuários ativos no aplicativo, por exemplo. E não tem como falar em segurança sem mencionar o OWASP.
      A colaboração de profissionais na área de TI é fundamental para o combate às falhas de segurança, blindagem dos sistemas contra invasões não autorizadas e vazamento de informações sigilosas dos usuários e empresas. Isso torna essencial acompanhar e participar ativamente do OWASP.
      Quer entender melhor o assunto? A seguir, veja o que é OWASP e por que ele é tão importante para a sua empresa!`,
    },
    {
      id: 9,
      titulo: "Como recuperar Pendrive corrompido",
      categoria: "intermediario",
      url: "https://hackersec.com/como-recuperar-pendrive-corrompido/",
      img: "img/informacao/intermediario/pendrive.jpg",
      resumo:
        "Vamos lhe ensinar como recuperar um pendrive corrompido de forma simples usando apenas o CMD com suporte ao formato USB para NTFS e FAT32.",
      texto: `Vamos lhe ensinar como recuperar um pendrive corrompido de forma simples usando apenas o CMD com suporte ao formato USB para NTFS e FAT32.

        Digite cmd na caixa de pesquisa do Windows e você poderá obter a melhor correspondência chamada Prompt de Comando. 
        Clique com o botão direito do mouse e escolha Executar como administrador!
        Em seguida digite: diskpart
        Logo após digite: list disk
        Escolha sua unidade USB digitando: select disk e o numero que está localizado o seu pendrive no meu caso é o 2 então ficou assim select disk 2
        Agora vamos limpar nossa unidade USB digitando: clean
        Feito isso precisamos criar uma partição primária digitando o seguinte comando: create partition primary
        Prosseguindo com a formatação vamos definir o formato do nosso pendrive, digite: format fs=fat32
        Agora só aguardar até 100%.`,
    },
    {
      id: 10,
      titulo: "O que são vírus de computador e worm de computador?",
      categoria: "intermediario",
      url:
        "https://www.kaspersky.com.br/resource-center/threats/computer-viruses-vs-worms",
      img: "img/informacao/intermediario/virusWorm.jpg",
      resumo:
        "Saiba as diferenças entre esses dois tipos de programas maliciosos",
      texto: `Uma distinção importante entre vírus e worms de computador é que o vírus precisa de um programa host ativo ou de um sistema operacional ativo já infectado para ser executado, causar danos e infectar outros documentos ou arquivos executáveis, enquanto os worms são programas maliciosos autônomos que se replicam e se propagam por redes de computadores, sem a ajuda das pessoas.
        Os vírus costumam ser anexados a um arquivo executável ou documento do Word. Muitas vezes, eles se propagam por compartilhamento de arquivos P2P, sites infectados e downloads de anexos de e-mail. Depois que um vírus encontra uma passagem pelo sistema, ele permanece dormente até que o arquivo ou programa host infectado seja ativado. Assim, o vírus é ativado e pode ser executado e replicado no sistema.
        Por outro lado, os worms não precisam de um programa host para serem executados, se replicarem e propagarem. Depois que o worm entra no sistema, em geral via conexão de rede ou arquivo baixado, ele pode se copiar várias vezes e se propagar pela rede ou pela conexão de Internet, infectando todos os computadores e servidores mal protegidos. Como cada cópia subsequente de um worm de rede também pode se replicar, as infecções conseguem se propagar com muita velocidade pela Internet e pelas redes de computadores.`,
    },
    {
      id: 11,
      titulo: "As certificações de cibersegurança mais renomadas",
      categoria: "avancado",
      url:
        "https://hackersec.com/as-certificacoes-de-ciberseguranca-mais-renomadas/",
      img: "img/informacao/avancado/certificacoes.png",
      resumo: `Conhecer e procurar investir nas certificações de segurança cibernética mais renomadas é essencial para uma carreira de segurança da informação.
      Listamos as certificações mais renomadas e conhecidas do mercado nacional e internacional.`,
      texto: `Conhecer e procurar investir nas certificações de segurança cibernética mais renomadas é essencial para uma carreira de segurança da informação.
      Listamos as certificações mais renomadas e conhecidas do mercado nacional e internacional.
      
      EC-Council – CEH – Certified Ethical Hacker
      (ISC)2 – CISSP – Certified Information Systems Security Professional
      ISACA – CISM – Certified Information Security Manager
      CompTIA Security+
      (ISC)2: CCSP – Certified Cloud Security Professional
      CISSP – Certified Information Systems Security Professional
      EC-Council – CHFI – Computer Hacking Forensic Investigator`,
    },
    {
      id: 12,
      titulo: "Como configurar uma rede sem fio",
      categoria: "avancado",
      url:
        "https://canaltech.com.br/internet/Como-configurar-uma-rede-sem-fio/",
      img: "img/informacao/avancado/rede.png",
      resumo: `Comprou um roteador novo e não quer que ninguém acesso a sua rede sem fio? Confira todos os passos simples para proteger a sua internet e as configurações presentes na maioria dos modelos que são encontrados à venda para proteger o seu sinal.`,
      texto: `Comprou um roteador novo e não quer que ninguém acesso a sua rede sem fio? Confira todos os passos simples para proteger a sua internet e as configurações presentes na maioria dos modelos que são encontrados à venda para proteger o seu sinal.`,
    },
    {
      id: 13,
      titulo: "Desafio Hacker: o que são os CTF",
      categoria: "avancado",
      url: "https://hackersec.com/desafios-hacker-o-que-sao-os-ctf/",
      img: "img/informacao/avancado/CTF.jpeg",
      resumo: `Conhecidos como Capture The Flag e chamados de CTF, é basicamente uma competição hacker que apresenta diversos desafios de cibersegurança`,
      texto: `Conhecidos como Capture The Flag e chamados de CTF, é basicamente uma competição hacker que apresenta diversos desafios de cibersegurança, onde o objetivo é concluir e pegar a “FLAG“, para poder pontuar. E podem ser jogados individualmente ou em equipe.
      Cada vez mais populares os CTFs são promovidos tanto na Internet como em eventos hacker e tecnologia em todo mundo. São sempre muito disputados geralmente por jovens que estão começando na área.`,
    },
    {
      id: 14,
      titulo: "Criptografia",
      categoria: "avancado",
      url: "https://hackersec.com/introducao-a-criptografia/",
      img: "img/informacao/avancado/criptografia.jpg",
      resumo:
        "É quase impossível falar de segurança da informação e não vir à cabeça assuntos relacionados a criptografia. ",
      texto: `É quase impossível falar de segurança da informação e não vir à cabeça assuntos relacionados a criptografia, isso se deve ao fato da importância em possuir sistemas com criptografia na confidencialidade das informações, e é por este motivo, que preparamos esta matéria abordando os principais conceitos e fundamentos da criptografia.`,
    },
    {
      id: 15,
      titulo: "O que é Pentest?",
      categoria: "avancado",
      url: "https://hackersec.com/o-que-e-pentest/",
      img: "img/informacao/avancado/pentest.jpg",
      resumo:
        "Cada dia mais ouvimos falar em Pentest, porque o mundo conectado é uma realidade consolidada e irreversível, e a cada dia surgem novas soluções que visam promover um maior conforto, facilidade e agilidade no dia-a-dia das pessoas e empresas, especialmente serviços financeiros.",
      texto: `Cada dia mais ouvimos falar em Pentest, porque o mundo conectado é uma realidade consolidada e irreversível, e a cada dia surgem novas soluções que visam promover um maior conforto, facilidade e agilidade no dia-a-dia das pessoas e empresas, especialmente serviços financeiros.
        Entretanto, a cada nova solução que incluímos em nossa rotina, sedemos aos desenvolvedores daquele serviço nossos preciosos dados pessoais. Então surge um questionamento importante: que garantias você tem de que seus dados estão protegidos? Ou que não estão sendo usados para outras coisas além do que você concordou? E quem garante que outros dados não estão sendo compartilhados sem seu conhecimento ou se os que você cedeu são realmente necessários? Agora imagine o estrago que isso poderia causar.
        O Pentest, ou Teste de Penetração numa tradução literal, tem como objetivo central detectar e explorar vulnerabilidades em um sistema para validar a eficácia dos mecanismos de segurança e melhorá-los. Esse processo permite uma avaliação também das consequências que essas falhas possam causar, quais as soluções de mitigação, quais novos problemas podem surgir após uma intervenção nas falhas entre outras coisas.
        Por tanto, Pentest não tem ligação com invasões deliberadas com o intuito único de expor gratuitamente desenvolvedores, empresas e pessoas, a visão sempre é melhorar a segurança, além de ser um ramo que cada vez mais abre espaço para novos profissionais no mercado de trabalho.
        Existem 3 tipos de pentest, chamados comumente de White Box, Black Box e Grey Box.
        White Box ou Caixa Branca, é o teste mais amplo dos 3 tipos, nele o pentester (como é chamado o profissional dessa área) tem conhecimento prévio do ambiente a ser explorado, conhece os detalhes da rede, IPs, senhas, níveis de usuário, infraestrutura, segurança, etc. Não é um tipo muito requisitado pelas empresas já que não simula uma situação real de ataque.
        Black Box ou Caixa Preta, é o teste com maior capacidade de simular uma situação real, pois assim como se espera que um hacker mal-intencionado não tenha conhecimento prévio nenhum do ambiente a ser invadido, o pentester também não terá nenhuma informação, um chamado “teste cego”.
        O Gray Box ou Caixa Cinza, mistura um pouco dos dois, onde o pentester tem algumas informações limitadas sobre o que será testado e em que ambiente, no entanto, são bem menos informações em relação ao primeiro tipo. Não é muito requisitado pelas empresas.
        Todos os três podem ser utilizados para diversas aplicações a serem testadas, como aplicações Web, serviços de rede, redes sem fio, engenharia social e até hardwares.
        Mesmo ainda havendo algum preconceito sobre esses testes, principalmente por serem realizado por pessoas com conhecimento hacking, os benefícios são compensadores. Ajuda as empresas a conhecerem o nível de maturidade da sua segurança, corrigir falhas que possam causar prejuízos às vezes incalculáveis a corporação e seus clientes, ajuda a zelar pela reputação daquele negócio e principalmente ajuda a mostrar que segurança não é gasto, é investimento.`,
    },
  ],
};

//let env = environment.options;
        

let adicionaFavorito = (e) => {
  let id = e.getAttribute("id");
  let usuario = JSON.parse(sessionStorage.getItem("usuarioCorrente"));
  let bodyUsuario = {
    usuario: usuario,
    card: id
  };
  let init = {
    method: 'POST',
    body: JSON.stringify(bodyUsuario)
  }
  let resp = "";
  fetch("http://localhost:4567/" + "adicionarFavorito", init)
    .then(response => response.json())
    .then(data => resp = data);
};

let adicionaCard = () => {
  let titulo = document.getElementById("txtTitulo").value;
  let categoria = document.getElementById("txtCategoria").value;
  let url = document.getElementById("txtUrl").value;
  let imagem = document.getElementById("txtImagem").value;
  let resumo = document.getElementById("txtResumo").value;
  let texto = document.getElementById("txtTexto").value;
  let novoCard = {
    titulo: titulo,
    categoria: categoria,
    url: url,
    img: imagem,
    resumo: resumo,
    texto: texto,
  };
  let myInit = {
    method: 'POST',
    mode: 'no-cors',
    body: JSON.stringify(novoCard)
  }
  let resp = "";
  fetch('http://localhost:4567/adicionaCard', myInit)
  .then(()=>{

    todos();

  })


};

let removeCard = (e) => {
  let id = document.getElementById("txtCardRemove").value;




  fetch(`http://localhost:4567/apagarCard?id=${id}`,).then(()=>{

    todos();
  });


  
};

let logado = () => {
  let usuarioCorrente = JSON.parse(sessionStorage.getItem("usuarioCorrente"));
  let nome = usuarioCorrente;

  let logins = document.querySelectorAll(".login");
  let usuario = document.querySelectorAll(".usuario");

  if (usuarioCorrente == "admin") {
    for (let i = 0; i < logins.length; i++) {
      usuario[i].innerHTML = `
      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
      aria-haspopup="true" aria-expanded="false">
      ${nome}
    </a>
    
    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
      <a class="dropdown-item" href="minhaConta.html">Minha Conta</a>
      <a class="dropdown-item" href="#" id = "logout">Sair</a>
    </div>
      `;
      logins[i].innerHTML = `${nome}`;
      logins[i].setAttribute("href", "usuario.html");
    }
    let tela = document.querySelector(".adicionaCard");

    let texto = `
    
    <button type="button" class="btn-salvar btn btn-warning" data-toggle="modal" data-target="#exampleModal">Adicionar Card</button>
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">Digite os dados do novo Card</h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    </div>
<div class="modal-body">
  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span
        class="input-group-text"
        id="inputGroup-sizing-default"
        >Titulo</span
      >
    </div>
    <input
      id="txtTitulo"
      type="text"
      class="form-control hsimp-level"
    />
  </div>
  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span
        class="input-group-text"
        id="inputGroup-sizing-default"
        >Categoria</span
      >
    </div>
    <select class="custom-select" id="txtCategoria">
    <option value="iniciante">Iniciante</option>
    <option value="intermediario">Intermediario</option>
    <option value="avançado">Avançado</option>
  </select>
  </div>
  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span
        class="input-group-text"
        id="inputGroup-sizing-default"
        >URL</span
      >
    </div>
    <input
      id="txtUrl"
      type="text"
      class="form-control hsimp-level"
    />
  </div>
  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span
        class="input-group-text"
        id="inputGroup-sizing-default"
        >Imagem</span
      >
    </div>
    <input
      id="txtImagem"
      type="text"
      class="form-control hsimp-level"
    />
  </div>
  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span
        class="input-group-text"
        id="inputGroup-sizing-default"
        >Resumo</span
      >
    </div>
    <input
      id="txtResumo"
      type="text"
      class="form-control hsimp-level"
    />
  </div>
  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span
        class="input-group-text"
        id="inputGroup-sizing-default"
        >Texto</span
      >
    </div>
    <textarea id="txtTexto" type="text" class="form-control hsimp-level" rows="4"/></textarea>
  </div>
</div>
<div class="modal-footer">
  <button id="btn-adiciona-card" type="button" class="btn btn-primary" data-dismiss="modal">Adicionar</button>
  <button type="button" class="btn btn-dark" data-dismiss="modal">Cancelar</button>
</div>
</div>
</div>
</div>

<!-- Button trigger modal -->
<button type="button" class="btn btn-danger" data-toggle="modal" data-target="#retiraCardModal">
Remover Card
</button>

<!-- Modal -->
<div class="modal fade" id="retiraCardModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Escolha o Card que deseja remover</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      <div class="input-group mb-3">
      <div class="input-group-prepend">
        <span
          class="input-group-text"
          id="inputGroup-sizing-default"
          >ID do card</span
        >
      </div>
      <input
        id="txtCardRemove"
        type="text"
        class="form-control hsimp-level"
      />
    </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
        <button type="button" id="removeCard" class="btn btn-primary" data-dismiss="modal">Remover</button>
      </div>
    </div>
  </div>
</div>
`;
    tela.innerHTML += texto;
  } else {
    for (i = 0; i < logins.length; i++) {
      usuario[i].innerHTML = `
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                ${nome}
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="minhaConta.html">Minha Conta</a>
                <a class="dropdown-item" href="#" id = "logout">Sair</a>
              </div>
    `;
      logins[i].innerHTML = `${nome}`;
      logins[i].setAttribute("href", "usuario.html");
    }
  }
};

let login = () => {
  let logins = document.querySelectorAll(".login");

  for (i = 0; i < logins.length; i++) {
    logins[i].setAttribute("href", "login.html");
  }
};

let formulario = () => {
  let tela = document.querySelector(".cards-main");
  let texto = `<div class="card-deck">

  <div class="card text-white bg-secondary mb-1" style="max-width: 25rem;">
          <div class="card-header">Nivel de conhecimento: Iniciante</div>
            <div class="card-body">
              <h5 class="card-title">Conhecimento basico de Web</h5>
              <p class="card-text">Você se considera um iniciante na Web, seu uso da web se baseia em leitura ocasional de e mails e notícias, não tem muita confiança ao usar a Web e tem dificuldade em navegar para achar as informações que gostaria. Nao tem uma ideia dos possiveis riscos que esta sujeito e pode facilmente ser vitima de golpes e ataques maliciosos. </p>                           
            </div>
            <div class="card-footer">
              <a class="btn btn-dark btn-iniciante">Comece aqui</a>
            </div>
      </div>
  

    <div class="card text-white bg-secondary mb-1" style="max-width: 25rem;">
        <div class="card-header">Nivel de conhecimento: Intermediario</div>
          <div class="card-body">
            <h5 class="card-title">Conhecimento intermediario de Web</h5>
            <p class="card-text">Você se considera um usuário Intermediário da Web, navega na internet várias vezes ao dia, seja para acessar redes sociais, entrar em portais de notícias, ver vídeos e até para estudar. Nao tem problema ao navegar usando ferramentas de busca e consegue achar a informação que precisa facilmente, tem uma ideia dos riscos que está correndo ao navegar na web, mas nao está ciente dos riscos mais atuais.</p>                          
          </div>
          <div class="card-footer">
            <a class="btn btn-dark btn-intermediario">Comece aqui</a>
          </div>
    </div>

    <div class="card text-white bg-secondary mb-1" style="max-width: 25rem;">
      <div class="card-header">Nivel de conhecimento: Avancado</div>
        <div class="card-body">
          <h5 class="card-title">Conhecimento avancado de Web</h5>
          <p class="card-text">Voce se considera um usuario avancado da Web, esta a todo tempo usando a internet para as mais diversas finalidades, sabe navegar de modo eficiente na Web e sempre acha a informacao que precisa. Sabe dos riscos que esta exposto e consegue identificar softwares maliciosos rapidamente, esta sempre atras de novas informacoes sobre seguranca na internet.</p>
        </div>
        <div class="card-footer">
          <a class="btn btn-dark btn-avancado">Comece aqui</a>
        </div>
  </div>

</div>`;

  tela.innerHTML = texto;
};

let atualizaTela = (conteudo) => {
  let tela = document.querySelector(".cards-main");
  let texto = "";

  texto += `<div class="card-deck">`

  for (i = 0; i < conteudo.length; i++) {
    let noticia = conteudo[i];

    texto += `<div class="cards" id="${noticia.id}">
    <div class="card bg-dark" style="width: 350px;">
    <a href="${noticia.url}" target = "blank" rel="noopener noreferrer"
      ><img src="${noticia.imagem}" class="card-img-top padrao" alt="..."
    /></a>
    <div class="card-body">
    <a href="${noticia.url}" target="blank" rel="noopener noreferrer"><h5 class="card-title">${noticia.id} - ${noticia.titulo}</h5></a>
      <p class="card-text">
        ${noticia.resumo}
      </p>
      </div>
      <p class="more">
      <div class = "card-footer">
        <button type="button" class="btn btn-dark" data-toggle="modal" data-target="#exampleModal${i}">Saber mais</button>
      </div>

      <div class="modal fade" id="exampleModal${i}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
          <div class="modal-content text-dark">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">${noticia.titulo}</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
            <h5>${noticia.texto}</h5>
            
            
          
            </div>
            <div class="modal-footer">
              <a href="${noticia.url}" target="blank" rel="noopener noreferrer">
                <button type="button" class="btn btn-primary visitaSite" >Visitar Site</button>
              </a>
              
              <button type="button" class="btn btn-dark adicionaFavorito" id="${noticia.id}" onclick = "adicionaFavorito(this)" data-dismiss="modal"> Favoritar</button>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
              
            </div>
          </div>
        </div>
      </div>
      
            
          </div>
        </div>
  
  
  `;
  }

  texto += `</div>`

  tela.innerHTML = texto;
};

let logout = () => {
  sessionStorage.removeItem("usuarioCorrente");
  document.location.reload();
};

let iniciante = () => {


  fetch('http://localhost:4567/selecao?categoria=iniciante')
    .then(response => response.json())
    .then((data) =>{ 
      atualizaTela(data.Cards);
    });

};

let intermediario = () => {

  fetch('http://localhost:4567/selecao?categoria=intermediario')
    .then(response => response.json())
    .then((data)=>{ atualizaTela(data.Cards)});

};

let avancado = () => {

  fetch('http://localhost:4567/selecao?categoria=avancado')
    .then(response => response.json())
    .then((data)=>{
      
      atualizaTela(data.Cards);
    });

};
let todos = () => {


  let init = {
    method: 'GET',

  }
  fetch('http://localhost:4567/listarCards', init)
    .then(response => response.json())
    .then((data)=>{
      
      atualizaTela(data.Cards);
    });




}

onload = () => {
  let usuarioCorrente = JSON.parse(sessionStorage.getItem("usuarioCorrente"));

  if (usuarioCorrente != null) {
    logado();
    todos();
    if (usuarioCorrente == "admin") {
      document
        .getElementById("btn-adiciona-card")
        .addEventListener("click", adicionaCard);
      document
        .getElementById("removeCard")
        .addEventListener("click", removeCard);
    }
    todos();

    document.getElementById("logout").addEventListener("click", logout);
  } else {
    login();
    formulario();
  }

  let botoes;
  botoes = document.querySelectorAll(".btn-iniciante");
  for (i = 0; i < botoes.length; i++) {
    botoes[i].addEventListener("click", iniciante);
  }

  botoes = document.querySelectorAll(".btn-intermediario");
  for (i = 0; i < botoes.length; i++) {
    botoes[i].addEventListener("click", intermediario);
  }

  botoes = document.querySelectorAll(".btn-avancado");
  for (i = 0; i < botoes.length; i++) {
    botoes[i].addEventListener("click", avancado);
  }
};
